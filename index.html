<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>The Serene Brew | Specialty Coffee</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@300;400;500;600&family=Outfit:wght@300;400;500&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg: #FAF8F5;
      --bg-warm: #F5F1EB;
      --fg: #2D2926;
      --fg-light: #4A4642;
      --muted: #8A8580;
      --accent: #7A8B6E;
      --accent-light: #A4B396;
      --card: #FFFFFF;
      --border: #E5E0D8;
      --cream: #F0EBE3;
      --oak: #C4A574;
    }

    * { box-sizing: border-box; }
    html { scroll-behavior: smooth; }

    body {
      font-family: 'Outfit', sans-serif;
      background-color: var(--bg);
      color: var(--fg);
      overflow-x: hidden;
    }

    .font-display { font-family: 'Cormorant Garamond', serif; }

    /* --- Coffee Bean Animation --- */
    .coffee-bean {
      position: fixed;
      pointer-events: none;
      z-index: -1;
      opacity: 0.15;
      filter: grayscale(0.2);
    }

    @keyframes floatAndRotate {
      0% { transform: translate(0, 0) rotate(0deg); opacity: 0; }
      10% { opacity: 0.15; }
      90% { opacity: 0.15; }
      100% { transform: translate(var(--move-x), var(--move-y)) rotate(var(--rotation)); opacity: 0; }
    }

    .organic-shape {
      position: absolute;
      border-radius: 60% 40% 50% 50% / 50% 60% 40% 50%;
      filter: blur(60px);
      opacity: 0.4;
      pointer-events: none;
    }

    .organic-shape-1 { width: 600px; height: 600px; background: var(--accent-light); animation: morphFloat 20s ease-in-out infinite; }
    .organic-shape-2 { width: 400px; height: 400px; background: var(--oak); opacity: 0.25; animation: morphFloat 15s ease-in-out infinite reverse; }
    
    @keyframes morphFloat {
      0%, 100% { border-radius: 60% 40% 50% 50% / 50% 60% 40% 50%; transform: translate(0, 0) rotate(0deg); }
      50% { border-radius: 50% 50% 40% 60% / 40% 50% 50% 60%; transform: translate(-20px, 30px) rotate(-3deg); }
    }

    .reveal { opacity: 0; transform: translateY(40px); transition: all 0.8s cubic-bezier(0.16, 1, 0.3, 1); }
    .reveal.visible { opacity: 1; transform: translateY(0); }

    .stagger-reveal > * { opacity: 0; transform: translateY(30px); transition: all 0.6s cubic-bezier(0.16, 1, 0.3, 1); }
    .stagger-reveal.visible > * { opacity: 1; transform: translateY(0); }

    .btn-primary {
      background: var(--accent); color: white; padding: 14px 32px; border-radius: 100px;
      transition: all 0.3s; position: relative; overflow: hidden; display: inline-block;
    }
    .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 8px 24px -8px rgba(122, 139, 110, 0.5); }

    .btn-secondary { padding: 14px 32px; border-radius: 100px; border: 1px solid var(--border); transition: all 0.3s; }
    .btn-secondary:hover { border-color: var(--accent); color: var(--accent); transform: translateY(-2px); }

    .menu-card { background: var(--card); border-radius: 20px; overflow: hidden; transition: all 0.4s; box-shadow: 0 4px 20px rgba(45, 41, 38, 0.04); }
    .menu-card:hover { transform: translateY(-8px); box-shadow: 0 20px 40px rgba(45, 41, 38, 0.1); }
    
    .filter-btn { padding: 10px 24px; border-radius: 100px; font-size: 14px; color: var(--muted); transition: all 0.3s; border: 1px solid transparent; }
    .filter-btn.active { background: var(--accent); color: white; }

    .nav-link { position: relative; color: var(--fg-light); transition: color 0.3s; }
    .nav-link::after { content: ''; position: absolute; bottom: -4px; left: 0; width: 0; height: 1px; background: var(--accent); transition: width 0.3s; }
    .nav-link:hover::after { width: 100%; }

    .modal-overlay { position: fixed; inset: 0; background: rgba(45, 41, 38, 0.4); backdrop-filter: blur(8px); opacity: 0; visibility: hidden; transition: all 0.4s; z-index: 100; }
    .modal-overlay.open { opacity: 1; visibility: visible; }
    .modal-content { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%) scale(0.95); background: var(--card); border-radius: 24px; max-width: 500px; width: 90%; opacity: 0; visibility: hidden; transition: all 0.4s; z-index: 101; }
    .modal-content.open { opacity: 1; visibility: visible; transform: translate(-50%, -50%) scale(1); }

    .form-input { width: 100%; padding: 16px 20px; border: 1px solid var(--border); border-radius: 12px; background: var(--bg); transition: all 0.3s; }
    .cart-badge { position: absolute; top: -6px; right: -6px; width: 20px; height: 20px; background: var(--oak); color: white; font-size: 11px; border-radius: 50%; display: flex; align-items: center; justify-content: center; transform: scale(0); transition: transform 0.3s; }
    .cart-badge.show { transform: scale(1); }

    .hero-element { opacity: 0; transform: translateY(30px); }
    .hero-loaded .hero-element { animation: fadeInUp 1s cubic-bezier(0.16, 1, 0.3, 1) forwards; }
    @keyframes fadeInUp { to { opacity: 1; transform: translateY(0); } }
  </style>
</head>
<body>
  <div id="coffee-background" class="fixed inset-0 pointer-events-none z-[-1]"></div>

  <nav class="fixed top-0 left-0 right-0 z-50 transition-all duration-500" id="navbar">
    <div class="max-w-7xl mx-auto px-6 py-5">
      <div class="flex items-center justify-between">
        <a href="#" class="font-display text-2xl font-medium tracking-wide text-[var(--fg)]">J cafe</a>
        <div class="hidden md:flex items-center gap-10">
          <a href="#menu" class="nav-link text-sm tracking-wide">Menu</a>
          <a href="#about" class="nav-link text-sm tracking-wide">Our Story</a>
          <a href="#reserve" class="nav-link text-sm tracking-wide">Reserve</a>
          <a href="#contact" class="nav-link text-sm tracking-wide">Find Us</a>
        </div>
        <div class="flex items-center gap-4">
          <button id="cartBtn" class="relative p-2 hover:bg-[var(--bg-warm)] rounded-full transition-colors">
            <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"></path><line x1="3" y1="6" x2="21" y2="6"></line><path d="M16 10a4 4 0 0 1-8 0"></path></svg>
            <span id="cartBadge" class="cart-badge">0</span>
          </button>
          <button id="mobileMenuBtn" class="md:hidden p-2"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg></button>
        </div>
      </div>
    </div>
  </nav>

  <section id="hero" class="relative min-h-screen flex items-center overflow-hidden">
    <div class="organic-shape organic-shape-1" style="top: -10%; right: -10%;"></div>
    <div class="organic-shape organic-shape-2" style="bottom: 10%; left: -5%;"></div>
    <div class="max-w-7xl mx-auto px-6 py-32 relative z-10">
      <div class="grid lg:grid-cols-2 gap-16 items-center">
        <div class="stagger-reveal" id="heroContent">
          <span class="hero-element inline-block text-sm tracking-[0.2em] text-[var(--accent)] font-medium mb-6">SPECIALTY COFFEE</span>
          <h1 class="hero-element font-display text-5xl md:text-7xl font-light leading-[1.1] mb-8">Where time<br><span class="font-medium">slows down</span></h1>
          <p class="hero-element text-lg text-[var(--fg-light)] font-light leading-relaxed max-w-md mb-10">A tranquil escape in the heart of the city. Savor organic, specialty-grade coffee in a space designed for mindful moments.</p>
          <div class="hero-element flex flex-wrap gap-4">
            <a href="#menu" class="btn-primary">View Menu</a>
            <a href="#reserve" class="btn-secondary">Reserve a Table</a>
          </div>
        </div>
        <div class="hero-element relative">
          <div class="aspect-[4/5] rounded-[32px] overflow-hidden bg-[var(--cream)] relative shadow-2xl">
            <img src="https://images.unsplash.com/photo-1495474472287-4d71bcdd2085?q=80&w=800&auto=format&fit=crop" class="w-full h-full object-cover" alt="Hero Coffee">
          </div>
        </div>
      </div>
    </div>
  </section>

  <section id="menu" class="py-24 relative">
    <div class="max-w-7xl mx-auto px-6">
      <div class="text-center mb-16 reveal">
        <span class="text-sm tracking-[0.2em] text-[var(--accent)] font-medium">THE MENU</span>
        <h2 class="font-display text-4xl md:text-5xl font-light mt-4 mb-6">Sensory Gallery</h2>
        <div class="section-divider mx-auto"></div>
      </div>

      <div class="flex flex-wrap justify-center gap-2 mb-12 reveal">
        <button class="filter-btn active" data-filter="all">All</button>
        <button class="filter-btn" data-filter="coffee">Coffee</button>
        <button class="filter-btn" data-filter="non-coffee">Non-Coffee</button>
        <button class="filter-btn" data-filter="bakery">Bakery</button>
      </div>

      <div id="menuGrid" class="grid md:grid-cols-2 lg:grid-cols-3 gap-8 stagger-reveal"></div>
    </div>
  </section>

  <section id="reserve" class="py-24 bg-[var(--bg-warm)] relative">
    <div class="max-w-3xl mx-auto px-6 relative z-10">
      <div class="text-center mb-12 reveal">
        <h2 class="font-display text-4xl md:text-5xl font-light">Reserve your moment</h2>
      </div>
      <form id="reserveForm" class="bg-[var(--card)] rounded-3xl p-8 md:p-12 shadow-lg reveal">
        <div class="grid md:grid-cols-2 gap-6 mb-6">
          <input type="text" class="form-input" placeholder="Your name" required>
          <input type="email" class="form-input" placeholder="your@email.com" required>
        </div>
        <button type="submit" class="btn-primary w-full">Confirm Reservation</button>
      </form>
    </div>
  </section>

  <footer class="py-12 border-t border-[var(--border)] text-center">
    <div class="font-display text-xl mb-4">The Serene Brew</div>
    <div class="text-sm text-[var(--muted)]">© 2026 Crafted with intention.</div>
  </footer>

  <div id="cartModal" class="modal-overlay"></div>
  <div id="cartContent" class="modal-content p-8">
    <h3 class="font-display text-2xl mb-6">Your Cart</h3>
    <div id="cartItems" class="space-y-4 mb-6"></div>
    <div class="border-t pt-6">
      <div class="flex justify-between mb-4"><span>Total</span><span id="cartTotal">0 THB</span></div>
      <button class="btn-primary w-full" onclick="alert('Checkout integration coming soon!')">Checkout</button>
      <button class="btn-secondary w-full mt-2" id="closeCart">Close</button>
    </div>
  </div>

  <button id="chatbotBtn" class="fixed bottom-6 right-6 w-16 h-16 bg-[#7A8B6E] text-white rounded-full shadow-2xl flex items-center justify-center z-[100] hover:scale-110 transition-transform">
    <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path></svg>
  </button>

  <div id="chatbotWindow" class="fixed bottom-24 right-6 w-[380px] h-[550px] bg-white rounded-3xl shadow-2xl z-[100] overflow-hidden hidden flex-col border border-[#E5E0D8]">
    <div class="p-4 bg-[#7A8B6E] text-white flex justify-between items-center shadow-md">
      <div class="flex items-center gap-2">
        <div class="w-2 h-2 bg-green-400 rounded-full animate-pulse"></div>
        <span class="font-display text-lg">Serene Assistant</span>
      </div>
      <button id="closeChatbot" class="hover:opacity-70 transition-opacity">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
      </button>
    </div>
    <iframe id="gradioFrame" src="https://aa673c2854e49c5b2c.gradio.live" frameborder="0" class="w-full h-full bg-[var(--bg)]"></iframe>
  </div>

  <script>
    // --- Coffee Bean Background Script ---
    function createCoffeeBeans() {
      const bg = document.getElementById('coffee-background');
      const beanCount = 12;
      const beanSVG = `<svg viewBox="0 0 24 24" fill="#3D2B1F" xmlns="http://www.w3.org/2000/svg"><path d="M12 2C7 2 3 6 3 11C3 16 7 22 12 22C17 22 21 16 21 11C21 6 17 2 12 2ZM11.5 18C10.1 18 9 16.9 9 15.5C9 14.1 11.5 11 11.5 11C11.5 11 14 14.1 14 15.5C14 16.9 12.9 18 11.5 18Z"/><path d="M12 2C13.5 2 15 3.5 16 6C17 8.5 16 12 12 14C8 12 7 8.5 8 6C9 3.5 10.5 2 12 2Z" fill="#5D4037"/></svg>`;
      for (let i = 0; i < beanCount; i++) {
        const bean = document.createElement('div');
        bean.className = 'coffee-bean';
        bean.innerHTML = beanSVG;
        const size = Math.random() * 30 + 30;
        bean.style.width = `${size}px`;
        bean.style.left = `${Math.random() * 100}vw`;
        bean.style.top = `${Math.random() * 100}vh`;
        const duration = Math.random() * 20 + 20;
        const delay = Math.random() * -20;
        const moveX = (Math.random() - 0.5) * 400;
        const moveY = (Math.random() - 0.5) * 400;
        const rotation = Math.random() * 720;
        bean.style.setProperty('--move-x', `${moveX}px`);
        bean.style.setProperty('--move-y', `${moveY}px`);
        bean.style.setProperty('--rotation', `${rotation}deg`);
        bean.style.animation = `floatAndRotate ${duration}s linear infinite`;
        bean.style.animationDelay = `${delay}s`;
        bg.appendChild(bean);
      }
    }

    const menuItems = [
      { id: 1, name: 'Ethiopian Yirgacheffe', category: 'coffee', price: 160, image: 'https://images.unsplash.com/photo-1541167760496-1628856ab772?q=80&w=800&auto=format&fit=crop', description: 'Bright, floral notes with citrus undertones' },
      { id: 2, name: 'Colombian Supremo', category: 'coffee', price: 145, image: 'https://images.unsplash.com/photo-1495474472287-4d71bcdd2085?q=80&w=800&auto=format&fit=crop', description: 'Well-balanced with caramel sweetness' },
      { id: 3, name: 'Sumatra Mandheling', category: 'coffee', price: 155, image: 'https://images.unsplash.com/photo-1498804103079-a6351b050096?q=80&w=800&auto=format&fit=crop', description: 'Full-bodied with earthy depth' },
      { id: 6, name: 'Matcha Latte', category: 'non-coffee', price: 135, image: 'https://images.unsplash.com/photo-1515823064-d6e0c04616a7?q=80&w=800&auto=format&fit=crop', description: 'Ceremonial grade with oat milk' },
      { id: 10, name: 'Almond Croissant', category: 'bakery', price: 75, image: 'https://images.unsplash.com/photo-1555507036-ab1f4038808a?q=80&w=800&auto=format&fit=crop', description: 'Buttery layers with almond cream' },
      { id: 9, name: 'Sourdough Toast', category: 'bakery', price: 85, image: 'https://images.unsplash.com/photo-1525351484163-7529414344d8?q=80&w=800&auto=format&fit=crop', description: 'House-baked with avocado spread' }
    ];

    let cart = [];
    let activeFilter = 'all';

    function renderMenu() {
      const grid = document.getElementById('menuGrid');
      const filtered = menuItems.filter(i => activeFilter === 'all' || i.category === activeFilter);
      grid.innerHTML = filtered.map(item => `<article class="menu-card"><div class="aspect-[4/3] bg-[var(--cream)] overflow-hidden"><img src="${item.image}" class="card-image" alt="${item.name}" loading="lazy"></div><div class="p-6"><div class="flex justify-between items-start mb-2"><h3 class="font-display text-xl">${item.name}</h3><span class="text-[var(--accent)] font-medium">${item.price}฿</span></div><p class="text-sm text-[var(--muted)] mb-4">${item.description}</p><button onclick="addToCart(${item.id})" class="btn-primary w-full py-2 text-sm">Add to Cart</button></div></article>`).join('');
    }

    function addToCart(id) {
      const item = menuItems.find(i => i.id === id);
      const existing = cart.find(c => c.id === id);
      if (existing) existing.quantity++; else cart.push({...item, quantity: 1});
      updateCartUI();
    }

    function updateCartUI() {
      const count = cart.reduce((s, i) => s + i.quantity, 0);
      const badge = document.getElementById('cartBadge');
      badge.textContent = count;
      badge.classList.toggle('show', count > 0);
      const total = cart.reduce((s, i) => s + (i.price * i.quantity), 0);
      document.getElementById('cartTotal').textContent = `${total} THB`;
      document.getElementById('cartItems').innerHTML = cart.map(i => `<div class="flex justify-between text-sm"><span>${i.name} x${i.quantity}</span><span>${i.price * i.quantity}฿</span></div>`).join('');
    }

    document.querySelectorAll('.filter-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        activeFilter = btn.dataset.filter;
        renderMenu();
      });
    });

    document.getElementById('cartBtn').addEventListener('click', () => {
      document.getElementById('cartModal').classList.add('open');
      document.getElementById('cartContent').classList.add('open');
    });

    document.getElementById('closeCart').addEventListener('click', () => {
      document.getElementById('cartModal').classList.remove('open');
      document.getElementById('cartContent').classList.remove('open');
    });

    const observer = new IntersectionObserver((entries) => {
      entries.forEach(e => { if(e.isIntersecting) e.target.classList.add('visible'); });
    }, { threshold: 0.1 });

    // --- chatbot-integrated: Toggle Logic ---
    const chatbotBtn = document.getElementById('chatbotBtn');
    const chatbotWindow = document.getElementById('chatbotWindow');
    const closeChatbot = document.getElementById('closeChatbot');

    chatbotBtn.addEventListener('click', () => {
      chatbotWindow.classList.toggle('hidden');
      chatbotWindow.classList.toggle('flex');
    });

    closeChatbot.addEventListener('click', () => {
      chatbotWindow.classList.add('hidden');
      chatbotWindow.classList.remove('flex');
    });

    window.onload = () => {
      createCoffeeBeans();
      renderMenu();
      document.querySelectorAll('.reveal, .stagger-reveal').forEach(el => observer.observe(el));
      setTimeout(() => document.getElementById('hero').classList.add('hero-loaded'), 300);
    };
  </script>
</body>
</html>